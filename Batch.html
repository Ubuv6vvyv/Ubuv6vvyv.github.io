<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commercial Invoice</title>
    <style>
        @page {
            size: A4;
            margin: 0;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
            line-height: 1.4;
            margin: 0;
            padding: 15px;
            box-sizing: border-box;
            width: 210mm;
            height: 297mm;
          
        }
        .container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        h1 {
            text-align: center;
            margin: 10px 0;
            font-size: 20px;
        }
        .top-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        .info-block {
            width: 48%;
            font-size: 11px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 11px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: center;
            vertical-align: middle;
        }
        th {
            background-color: #000;
            color: #fff;
        }
        td {
            background-color: #fff;
            color: #000;
        }
        .editable {
            background-color: #f1f1f1;
            border: 1px solid black;
            padding: 4px;
            display: inline-block;
            min-width: 30px;
            min-height: 14px;
        }
        .note {
            margin-top: 15px;
            font-size: 11px;
        }
        .signature {
            margin-top: 20px;
            text-align: right;
            font-size: 11px;
        }
        .signature-line {
            width: 150px;
            border-top: 1px solid #000;
            margin-top: 5px;
            display: inline-block;
        }
        @media screen and (max-width: 210mm) {
            body {
                width: 100%;
                height: auto;
            }
        }
        @media print {
            body {
                width: 210mm;
                height: 297mm;
            }
            .no-print {
                display: none;
            }
        }
        .date-picker {
            width: 80px;
        }
        .currency {
            text-align: right;
        }
        .add-row, .remove-row {
            cursor: pointer;
            color: blue;
            text-decoration: underline;
        }
        .error {
            border: 1px solid red;
        }
        .shipping-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        .shipping-block {
            width: 48%;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        button {
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Commercial Invoice</h1>
        <div class="top-info">
            <div class="info-block">
                <strong>Sender:</strong><br>
                <span class="editable" contenteditable="true">PT. Nawares Terbang Bersama</span><br>
                <span class="editable" contenteditable="true">Hanna Salim</span><br>
                <span class="editable" contenteditable="true">Jln. Sadane No. 75 Kel. Empang Kec.</span><br>
                <span class="editable" contenteditable="true">Kota Bogor, Prov. Jawa Barat 16132, Indonesia</span>
            </div>
            <div class="info-block">
                <strong>Consignee:</strong><br>
                <span class="editable" contenteditable="true">LHT GROUP PTY LTD</span><br>
                <span class="editable" contenteditable="true">Sukbhir Singh</span><br>
                <span class="editable" contenteditable="true">51 Napier St, Footscray</span><br>
                <span class="editable" contenteditable="true">MELBOURNE, VICTORIA 3011, Australia</span>
            </div>
        </div>

        <table>
            <tr>
                <th>Email Address</th>
                <td><span class="editable" contenteditable="true">imports@luxhometrading.com</span></td>
                <th>Phone Number</th>
                <td><span class="editable" contenteditable="true">+61458565327</span></td>
            </tr>
            <tr>
                <th>Invoice Date</th>
                <td><span class="editable" contenteditable="true">21-08-2024</span></td>
                <th>Invoice Number</th>
                <td><span class="editable" contenteditable="true">N008765</span></td>
            </tr>
            <tr>
                <th>DHL Waybill Number</th>
                <td><span class="editable" contenteditable="true"></span></td>
                <th>Sender's Reference</th>
                <td><span class="editable" contenteditable="true">LUX2109</span></td>
            </tr>
            <tr>
                <th>Carrier</th>
                <td><span class="editable" contenteditable="true">DHL</span></td>
                <th>Recipient's Reference</th>
                <td><span class="editable" contenteditable="true">LUX2109</span></td>
            </tr>
        </table>

        <div class="shipping-details">
            <div class="shipping-block">
                <strong>Shipping Method:</strong> <span class="editable" contenteditable="true">Air Freight</span><br>
                <strong>Estimated Delivery:</strong> <span class="editable" contenteditable="true">5-7 business days</span><br>
                <strong>Terms of Delivery:</strong> <span class="editable" contenteditable="true">DAP (Delivered At Place)</span>
            </div>
            <div class="shipping-block">
                <strong>Port of Loading:</strong> <span class="editable" contenteditable="true">Jakarta, Indonesia</span><br>
                <strong>Port of Discharge:</strong> <span class="editable" contenteditable="true">Melbourne, Australia</span><br>
                <strong>Final Destination:</strong> <span class="editable" contenteditable="true">Melbourne, Australia</span>
            </div>
        </div>

        <table id="items-table">
            <tr>
                <th>Quantity</th>
                <th>Country of Origin</th>
                <th>Description of Contents</th>
                <th>Harmonised Code</th>
                <th>Unit Weight</th>
                <th>Unit Value</th>
                <th>Subtotal</th>
                <th class="no-print">Actions</th>
            </tr>
            <tr>
                <td><span class="editable quantity" contenteditable="true">150</span></td>
                <td><span class="editable" contenteditable="true">Indonesia</span></td>
                <td><span class="editable" contenteditable="true">Small class vases with floral designs</span></td>
                <td><span class="editable" contenteditable="true">793020</span></td>
                <td><span class="editable" contenteditable="true">0.50</span></td>
                <td><span class="editable currency unit-value" contenteditable="true">2.00</span></td>
                <td><span class="currency subtotal">300.00</span></td>
                <td class="no-print"><span class="remove-row">Remove</span></td>
            </tr>
            <tr>
                <td><span class="editable quantity" contenteditable="true">120</span></td>
                <td><span class="editable" contenteditable="true">Indonesia</span></td>
                <td><span class="editable" contenteditable="true">Stainless steel canisters with lids</span></td>
                <td><span class="editable" contenteditable="true">732390</span></td>
                <td><span class="editable" contenteditable="true">0.60</span></td>
                <td><span class="editable currency unit-value" contenteditable="true">2.50</span></td>
                <td><span class="currency subtotal">300.00</span></td>
                <td class="no-print"><span class="remove-row">Remove</span></td>
            </tr>
            <tr>
                <td><span class="editable quantity" contenteditable="true">240</span></td>
                <td><span class="editable" contenteditable="true">Indonesia</span></td>
                <td><span class="editable" contenteditable="true">Clear glass tumblers with decorative rims</span></td>
                <td><span class="editable" contenteditable="true">701340</span></td>
                <td><span class="editable" contenteditable="true">0.50</span></td>
                <td><span class="editable currency unit-value" contenteditable="true">2.00</span></td>
                <td><span class="currency subtotal">480.00</span></td>
                <td class="no-print"><span class="remove-row">Remove</span></td>
            </tr>
            <tr>
                <td colspan="6"><strong>Total Declared Value (AUD)</strong></td>
                <td><span class="currency" id="total-value">1080.00</span></td>
                <td class="no-print"><span class="add-row">Add Row</span></td>
            </tr>
        </table>

        <div class="note">
            <strong>General Notes:</strong>
            <p><span class="editable" contenteditable="true">The exporter of the products covered by this document declares that, except where otherwise clearly indicated, these products are of preferential origin.</span></p>
            <p><span class="editable" contenteditable="true">I/We hereby certify that the information on this document is true and correct and that the contents of this shipment are as stated above.</span></p>
            <p><span class="editable" contenteditable="true">With reference to the above shipment, I understand that the content is not made of leather parts of animal species protected by the Washington Convention.</span></p>
        </div>

        <div class="signature">
            <span class="editable" contenteditable="true">Name & Position: Hanna Salim, Managing Director</span>
            <div class="signature-line"></div>
            <p>Signature</p>
        </div>

        <div class="button-container no-print">
            <button id="save-draft">Save Draft</button>
            <button id="load-draft">Load Draft</button>
            <button id="clear-fields">Clear All Fields</button>
        </div>
    </div>

    <script>
        // Function to format currency
        function formatCurrency(value) {
            return parseFloat(value).toFixed(2);
        }

        // Function to calculate subtotals and total
        function calculateTotals() {
            let total = 0;
            document.querySelectorAll('#items-table tr:not(:last-child)').forEach(row => {
                const quantity = parseFloat(row.querySelector('.quantity').textContent) || 0;
                const unitValue = parseFloat(row.querySelector('.unit-value').textContent) || 0;
                const subtotal = quantity * unitValue;
                row.querySelector('.subtotal').textContent = formatCurrency(subtotal);
                total += subtotal;
            });
            document.getElementById('total-value').textContent = formatCurrency(total);
        }

        // Add event listeners for editable fields
        document.querySelectorAll('.editable').forEach(el => {
            el.addEventListener('blur', function() {
                if (this.classList.contains('currency')) {
                    this.textContent = formatCurrency(this.textContent);
                }
                calculateTotals();
            });
        });

        // Add row functionality
        document.querySelector('.add-row').addEventListener('click', function() {
            const newRow = document.querySelector('#items-table tr:nth-child(2)').cloneNode(true);
            newRow.querySelectorAll('.editable').forEach(el => el.textContent = '');
            newRow.querySelector('.subtotal').textContent = '0.00';
            this.closest('tr').before(newRow);
        });

        // Remove row functionality
        document.querySelector('#items-table').addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-row')) {
                e.target.closest('tr').remove();
                calculateTotals();
            }
        });

        // Save draft functionality
        document.getElementById('save-draft').addEventListener('click', function() {
            const data = {
                sender: document.querySelector('.info-block:first-child').innerHTML,
                consignee: document.querySelector('.info-block:last-child').innerHTML,
                items: Array.from(document.querySelectorAll('#items-table tr:not(:first-child):not(:last-child)')).map(row => ({
                    quantity: row.querySelector('.quantity').textContent,
                    country: row.querySelector('td:nth-child(2) .editable').textContent,
                    description: row.querySelector('td:nth-child(3) .editable').textContent,
                    code: row.querySelector('td:nth-child(4) .editable').textContent,
                    weight: row.querySelector('td:nth-child(5) .editable').textContent,
                    unitValue: row.querySelector('.unit-value').textContent,
                })),
                notes: document.querySelector('.note').innerHTML,
            };
            localStorage.setItem('invoiceDraft', JSON.stringify(data));
            alert('Draft saved successfully!');
        });

        // Load draft functionality
        
             
                        
                        
                        // Clear fields functionality
document.getElementById('clear-fields').addEventListener('click', function() {
  document.querySelectorAll('.editable').forEach(el => el.textContent = '');
  document.querySelectorAll('.subtotal').forEach(el => el.textContent = '0.00');
  document.getElementById('total-value').textContent = '0.00';
});

// Calculate totals on page load
calculateTotals();

</script>
</body>
</html>